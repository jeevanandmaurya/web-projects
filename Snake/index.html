<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
     <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"> </script>
</head>

<body
    style=" display: flex; flex-direction: column; align-items: center; justify-content: flex-start; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; font-family: sans-serif;">

    <div style="display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; width: 100%;">

        <h1>Snake Game</h1>
        <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
            <button onclick="runUserGameLoop()">Play Game</button>
            <button onclick="runAiIterations()">Run AI</button>
            <button onclick="stopAi()">Stop AI</button>
        </div>
        <div style="display: flex; align-items: center; gap: 5px; margin-left: 10px;">
            <label for="speedRange">Speed:</label>
            <input type="range" id="speedRange" min="1" max="200" value="120" oninput="updateSpeed(this.value)">
            <span id="speedValue">120ms</span>
        </div>
        <div style="display: flex; flex-direction: column; align-items: flex-start; margin-left: 10px; font-size: 12px; color: #555;">
            <div style="display: flex; align-items: center; gap: 5px;">
                <label for="distIterRange" style="font-weight: bold; color: black; font-size: 14px;">Distance-Based Iterations:</label>
                <input type="range" id="distIterRange" min="0" max="500" value="0" oninput="updateDistIter(this.value)">
                <span id="distIterValue" style="font-weight: bold; color: black; font-size: 14px;">0</span>
            </div>
            <span style="max-width: 300px;">Guided training phase where the AI follows a simple "move toward food" rule to collect high-quality initial data.</span>
        </div>
        <h3 id="iteration">Iteration: 0</h3>
    </div>
    <div style="display: flex; align-items: flex-start; justify-content: center; flex-wrap: wrap; gap: 40px; width: 100%;">

        <div class="aiRealtimeOutput" style="display: flex; flex-direction: column; gap: 10px;">
            <h2>AI Controls</h2>
            <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                <button onclick="saveModel()">Save Model</button>
                <button onclick="loadModel()">Load Model</button>
                <button onclick="clearModel()" style="background-color: #ffcccc;">Clear Saved</button>
            </div>
            <div id="micro-out-div">Ready</div>
            <canvas id="aiCanvas" width="200" height="200" style="border:1px solid #000000;"></canvas>
            <p>WASD or Arrow Keys to Control</p>
            <p>Space to restart</p>
        </div>

        <canvas id="myCanvas" width="500" height="500" style="border:1px solid #000000;">
        </canvas>

        <div class="graph">
            <h2>Iteration vs Score</h2>
            <canvas id="graphCanvas" width="400" height="400" style="border:1px solid #000000;">
        </div>
    </div>
    <div class="controls "
        style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; margin-top: 20px;">
        <button id="upBtn" onclick="moveUp()">Up</button>
        <div class="horizontal" style="display: flex; flex-direction: row; gap: 10px;">

            <button id="leftBtn" onclick="moveLeft()">Left</button>
            <button id="rightBtn" onclick="moveRight()">Right</button>
        </div>
        <button id="downBtn" onclick="moveDown()">Down</button>
    </div>
    <div id="gameOverModal"  style="display: none; background: #ececec; position: absolute; top: 45%; left: 45%; transform: translate(-50%, -50%); padding: 10px; margin-top: 20px; flex-direction: column; justify-content: center; align-items: center; color: red; font-weight: bold;">
        <h1>Game Over!</h1>
        <button onclick="restartGame()">Restart</button>
    </div>

</body>
<script src="script.js"></script>

</html>